<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="eu.greenhouseinnovation.selly.common.model.dao.EventDao">

    <insert id="storeEvent" keyColumn="id" parameterType="Event">
        INSERT INTO events
          (id, tracking_context, client_category,
           event_context, event_action, event_data,
           user_context, device_context, timestamp,
           user_agent, remote_ip)
        VALUES
          (#{event.mId}, #{event.mTrackingContext}, #{event.mClientCategory},
           #{event.mContext}, #{event.mAction}, #{event.mData},
           #{event.mUserContext}, #{event.mDeviceContext}, NOW(),
           #{event.mUserAgent}, #{event.mRemoteIp})
    </insert>

    <insert id="storeEvents" keyColumn="id" parameterType="Event">
        INSERT INTO events
        (id, tracking_context, client_category,
        event_context, event_action, event_data,
        user_context, device_context, timestamp,
        user_agent, remote_ip)
        VALUES
        <foreach collection="events" item="model" separator=",">
            (#{model.mId}, #{model.mTrackingContext}, #{model.mClientCategory},
             #{model.mContext}, #{model.mAction}, #{model.mData},
             #{model.mUserContext}, #{event.mDeviceContext}, NOW(),
             #{model.mUserAgent}, #{event.mRemoteIp})
        </foreach>
    </insert>
</mapper>
