<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="eu.greenhouseinnovation.selly.common.model.dao.PushNotificationTemplateDao">

    <insert id="insertPushNotificationTemplate" parameterType="eu.greenhouseinnovation.selly.common.model.push.model.PushNotificationTemplate">
        INSERT INTO push_notification_template
        (
        id,template,notification_type,device_language
        )
        VALUES
        (
        #{template.mId},
        #{template.mTemplate},
        #{template.mNotificationType.name},
        #{template.mDeviceLanguage}
        )
    </insert>

    <select id="getTemplate" resultType="eu.greenhouseinnovation.selly.common.model.push.model.PushNotificationTemplate" resultMap="NotificationTemplateMap">
        SELECT id,template,notification_type,device_language
        FROM push_notification_template
        WHERE notification_type = #{notificationType.name}
        AND device_language = #{deviceLanguage}
    </select>

    <!-- Result maps -->
    <resultMap id="NotificationTemplateMap" type="eu.greenhouseinnovation.selly.common.model.push.model.PushNotificationTemplate">
        <result property="mId" column="id" />
        <result property="mTemplate" column="template" />
        <result property="mNotificationType" column="notification_type"/>
        <result property="mDeviceLanguage" column="device_language" />
    </resultMap>


</mapper>